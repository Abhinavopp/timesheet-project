<div class="project-detail" *ngIf="!loading && project">
  <div class="project-header">
    <button class="back-btn" (click)="goBack()">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
        <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>
    <div class="header-content">
      <h1 class="project-title">{{ project.name }}</h1>
      <p class="project-description">{{ project.description }}</p>
    </div>
  </div>

  <div class="project-meta">
    <div class="meta-item">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" class="meta-icon">
        <rect x="3" y="3" width="14" height="14" rx="2" stroke="#3b82f6" stroke-width="1.5"/>
        <path d="M10 7V10L13 13" stroke="#3b82f6" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <div class="meta-content">
        <div class="meta-label">Status</div>
        <div class="meta-value">{{ project.status || 'Active' }}</div>
      </div>
    </div>
    <div class="meta-item">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" class="meta-icon">
        <rect x="3" y="5" width="14" height="12" rx="2" stroke="#10b981" stroke-width="1.5"/>
        <path d="M7 3V7M13 3V7M3 9H17" stroke="#10b981" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      <div class="meta-content">
        <div class="meta-label">Created</div>
        <div class="meta-value">{{ formatDate(project.created_at) }}</div>
      </div>
    </div>
  </div>

  <div class="project-tabs">
    <button
      class="tab-btn"
      [class.active]="activeTab === 'list'"
      (click)="setActiveTab('list')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <path d="M2 4H14M2 8H14M2 12H14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      List
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'board'"
      (click)="setActiveTab('board')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <rect x="2" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
        <rect x="9" y="2" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
        <rect x="2" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
        <rect x="9" y="9" width="5" height="5" rx="1" stroke="currentColor" stroke-width="1.5"/>
      </svg>
      Board
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'calendar'"
      (click)="setActiveTab('calendar')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <rect x="2" y="3" width="12" height="11" rx="2" stroke="currentColor" stroke-width="1.5"/>
        <path d="M2 6H14M5 2V4M11 2V4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      Calendar
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'gantt'"
      (click)="setActiveTab('gantt')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <path d="M2 3H8M2 6H11M2 9H6M2 12H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      Gantt
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'workload'"
      (click)="setActiveTab('workload')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
        <path d="M8 5V8L11 11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      Workload
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'timeEntry'"
      (click)="setActiveTab('timeEntry')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <circle cx="8" cy="8" r="6" stroke="currentColor" stroke-width="1.5"/>
        <path d="M8 5V8H11" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      Time Entry
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'milestones'"
      (click)="setActiveTab('milestones')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
        <path d="M5 8L7 10L11 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Milestones
    </button>
    <button
      class="tab-btn"
      [class.active]="activeTab === 'resources'"
      (click)="setActiveTab('resources')">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
        <circle cx="8" cy="5" r="2.5" stroke="currentColor" stroke-width="1.5"/>
        <path d="M3 13C3 10.7909 5.68629 9 9 9C12.3137 9 15 10.7909 15 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      Resources
    </button>
  </div>

  <div class="content-area" *ngIf="activeTab === 'list'">
    <div class="content-toolbar">
      <div class="search-box">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/>
          <path d="M11 11L14 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <input type="text" placeholder="Search tasks..." />
      </div>
      <div class="toolbar-filters">
        <select class="filter-select" [(ngModel)]="statusFilter">
          <option value="all">All Status</option>
          <option value="todo">To Do</option>
          <option value="in_progress">In Progress</option>
          <option value="review">Review</option>
          <option value="completed">Completed</option>
        </select>
        <button class="filter-btn">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M2 4H14M4 8H12M6 12H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          More Filters
        </button>
      </div>
    </div>

    <div class="tasks-table">
      <div class="table-header">
        <div class="th th-task">TASK</div>
        <div class="th th-status">STATUS</div>
        <div class="th th-priority">PRIORITY</div>
        <div class="th th-assignee">ASSIGNEE</div>
        <div class="th th-date">DUE DATE</div>
        <div class="th th-tags">TAGS</div>
      </div>
      <div class="table-body">
        <div class="task-row" *ngFor="let task of getFilteredTasks()">
          <div class="td td-task">
            <input type="checkbox" [checked]="task.status === 'COMPLETED'" />
            <div class="task-info">
              <div class="task-title">{{ task.title }}</div>
              <div class="task-subtitle" *ngIf="task.description">{{ task.description }}</div>
            </div>
          </div>
          <div class="td td-status">
            <span class="status-badge" [ngClass]="getStatusClass(task.status)">
              {{ task.status.toLowerCase().replace('_', ' ') }}
            </span>
          </div>
          <div class="td td-priority">
            <span class="priority-flag">{{ getPriorityIcon(task.priority) }}</span>
          </div>
          <div class="td td-assignee">
            <div class="assignee-avatar" *ngIf="task.assignee">
              {{ task.assignee.charAt(0).toUpperCase() }}
            </div>
          </div>
          <div class="td td-date">
            {{ formatDateRange(task.start_date, task.due_date) }}
          </div>
          <div class="td td-tags">
            <span class="tag" *ngFor="let tag of task.tags">{{ tag }}</span>
            <span class="no-tags" *ngIf="!task.tags || task.tags.length === 0">No tags</span>
          </div>
        </div>
        <div class="empty-state" *ngIf="getFilteredTasks().length === 0">
          <p>No tasks found</p>
        </div>
      </div>
    </div>
  </div>

  <div class="content-area" *ngIf="activeTab !== 'list'">
    <div class="empty-view">
      <p>{{ activeTab.charAt(0).toUpperCase() + activeTab.slice(1) }} view coming soon</p>
    </div>
  </div>
</div>

<div class="loading-state" *ngIf="loading">
  <p>Loading project...</p>
</div>
